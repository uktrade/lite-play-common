!function(a){"use strict";var b={"alternative-spellings":!0,"alternative-spellings-attr":"data-alternative-spellings","autocomplete-plugin":"jquery_ui",autoFocus:!0,autoselect:!0,"copy-attributes-to-text-field":!0,delay:0,"ignore-disabled":!0,"intl-sensitivity":"base",locale:"en",minLength:0,"relevancy-sorting":!0,"relevancy-sorting-booster-attr":"data-relevancy-booster","relevancy-sorting-partial-match-value":1,"relevancy-sorting-strict-match-value":5,"remove-valueless-options":!1,sort:!1,"sort-attr":"data-priority","sort-desc":!1};b.handle_invalid_input=function(a){var b="option:selected"+(a.settings["ignore-disabled"]?":enabled":"")+(a.settings["remove-valueless-options"]?'[value!=""]':"");return a.$text_field.val(a.$select_field.find(b).first().text())},b.handle_select_field=function(a){return a.$select_field.hide()},b.insert_text_field=function(b){var c=b.$text_field=a('<input type="text" autocomplete="off"></input>'),d=b.settings;if(d["copy-attributes-to-text-field"]){for(var e={},f=b.$select_field[0].attributes,g=0;g<f.length;g++){var h=f[g].name||f[g].nodeName,i=f[g].value||f[g].nodeValue;"name"!==h&&"id"!==h&&"undefined"!=typeof b.$select_field.attr(h)&&(e[h]=i)}c.attr(e)}c.blur(function(){var e=b.$select_field.find("option").map(function(b,c){return a(c).text()});a.inArray(c.val(),e)<0&&"function"==typeof d.handle_invalid_input&&d.handle_invalid_input(b)}),b.settings.autoselect&&c.click(function(){this.select()}),b.settings.handle_invalid_input(b).insertAfter(b.$select_field)},b.extract_options=function(b){var c=[],d=b.$select_field.find(b.settings["ignore-disabled"]?"option:enabled":"option"),e=d.length,f=b.settings;d.each(function(){var b=a(this),d={"real-value":b.attr("value"),label:b.text()};f["remove-valueless-options"]&&""===d["real-value"]||(d.matches=d.label+" "+(b.attr(f["alternative-spellings-attr"])||""),f.sort&&(d.weight=parseInt(b.attr(f["sort-attr"]),10)||e),f["relevancy-sorting"]&&(d["relevancy-score"]=0,d["relevancy-score-booster"]=parseFloat(b.attr(f["relevancy-sorting-booster-attr"]))||1),c.push(d))}),f.sort&&(f["sort-desc"]?c.sort(function(a,b){return b.weight-a.weight}):c.sort(function(a,b){return a.weight-b.weight})),b.options=c};var c={init:function(c){if(/MSIE [1-6][\.,]/i.test(navigator.userAgent))return this;var e=a.extend({},b,c);return this.each(function(){var c,b=a(this);c={$select_field:b,settings:e},e.extract_options(c),e.insert_text_field(c),e.handle_select_field(c),"string"==typeof e["autocomplete-plugin"]?d[e["autocomplete-plugin"]](c):e["autocomplete-plugin"](c)})}},d={jquery_ui:function(b){function c(c){var f,g,d=b.settings.locale,e=b.settings["intl-sensitivity"];try{return f=Intl.Collator(d,{sensitivity:e}),function(a){for(var b=0;b<1+a.length-c.length;b++){var d=a.slice(b,b+c.length);if(0===f.compare(d,c))return!0}return!1}}catch(b){return g=new RegExp(a.ui.autocomplete.escapeRegex(c),"i"),function(a){return g.test(a)}}}function d(c){var f,g,d=b.settings.locale,e=b.settings["intl-sensitivity"];try{return f=Intl.Collator(d,{sensitivity:e}),function(a){var b=a.slice(0,c.length);return 0===f.compare(b,c)}}catch(b){return g=new RegExp("^"+a.ui.autocomplete.escapeRegex(c),"i"),function(a){return g.test(a)}}}function e(e){for(var f=e.split(" "),g=[],h=0;h<f.length;h++)if(f[h].length>0){var i={};i.partial=c(f[h]),b.settings["relevancy-sorting"]&&(i.strict=d(f[h])),g.push(i)}return a.grep(b.options,function(a){var d,f,c=0;b.settings["relevancy-sorting"]&&(f=!1,d=a.matches.split(" "));for(var h=0;h<g.length;h++)if(g[h].partial(a.matches)&&c++,b.settings["relevancy-sorting"])for(var i=0;i<d.length;i++)if(g[h].strict(d[i])){f=!0;break}if(b.settings["relevancy-sorting"]){var j=0;j+=c*b.settings["relevancy-sorting-partial-match-value"],f&&(j+=b.settings["relevancy-sorting-strict-match-value"]),j*=a["relevancy-score-booster"],a["relevancy-score"]=j}return!e||g.length===c})}function f(a){if(a)b.$select_field.val()!==a["real-value"]&&(b.$select_field.val(a["real-value"]),b.$select_field.change());else{for(var c=b.$text_field.val().toLowerCase(),d={"real-value":!1},e=0;e<b.options.length;e++)if(c===b.options[e].label.toLowerCase()){d=b.options[e];break}b.$select_field.val()!==d["real-value"]&&(b.$select_field.val(d["real-value"]||""),b.$select_field.change()),d["real-value"]&&b.$text_field.val(d.label),"function"==typeof b.settings.handle_invalid_input&&""===b.$select_field.val()&&b.settings.handle_invalid_input(b)}}b.$text_field.autocomplete({minLength:b.settings.minLength,delay:b.settings.delay,autoFocus:b.settings.autoFocus,source:function(a,c){var d=e(a.term);b.settings["relevancy-sorting"]&&(d=d.sort(function(a,b){return b["relevancy-score"]==a["relevancy-score"]?b.label<a.label?1:-1:b["relevancy-score"]-a["relevancy-score"]})),c(d.slice(0,1+(b.settings.maxResults||d.length-1)))},select:function(a,b){f(b.item)},change:function(a,b){f(b.item)}}),b.$text_field.parents("form").first().submit(function(){f()}),f()}};a.fn.selectToAutocomplete=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.fn.selectToAutocomplete"):c.init.apply(this,arguments)}}(jQuery);